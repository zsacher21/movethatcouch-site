<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tear-Off Flyer • MOVE THAT COUCH!</title>

  <style>
    :root{
      /* US Letter LANDSCAPE @ 300dpi */
      --W: 3300px;
      --H: 2550px;

      --ink: #0f172a;
      --muted: #475569;
      --line: #e2e8f0;

      --green1: #22c55e;
      --green2: #34d399;

      --qrBorder: #b8f3cf;
      --qrBg: #f0fff6;

      --dash: #93c5fd;
      --dash2: #bfdbfe;
    }

    html, body { margin:0; padding:0; background:#fff; }
    *{ box-sizing:border-box; }

    /* REQUIRED for flyerExport.js */
    #flyer{
      width: var(--W);
      height: var(--H);
      overflow: hidden;
      position: relative;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      color: var(--ink);
      background:#fff;
    }

    /* HEADER */
    .header{
      display:grid;
      grid-template-columns: 1.15fr 1fr;
      height: 520px;
      border-bottom: 2px solid var(--line);
    }

    .brand{
      background: linear-gradient(135deg, var(--green1), var(--green2));
      padding: 74px 80px;
      display:flex;
      align-items:center;
      gap: 30px;
    }

    .logoBox{
      width: 118px;
      height: 118px;
      border-radius: 28px;
      background:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      flex: 0 0 auto;
    }
    .logoBox img{
      width: 92px;
      height: 92px;
      object-fit: contain;
      display:block;
    }

    .brandTitle{
      font-size: 92px;
      font-weight: 950;
      letter-spacing: 1px;
      line-height: 1.0;
      margin: 0;
      color:#fff;
    }
    .brandSub{
      margin-top: 10px;
      font-size: 34px;
      font-weight: 800;
      color:#eafff1;
    }

    .pitch{
      padding: 64px 74px 54px 74px;
      display:grid;
      grid-template-columns: 1fr 360px;
      gap: 42px;
      align-items:start;
    }

    .pitch h2{
      margin: 0 0 10px 0;
      font-size: 58px;
      font-weight: 950;
      line-height: 1.06;
    }
    .pitch p{
      margin: 0 0 18px 0;
      font-size: 28px;
      color: var(--muted);
      line-height: 1.25;
      max-width: 1450px;
    }

    .itemsRow{
      display:flex;
      flex-wrap:wrap;
      gap: 10px 18px;
      margin-top: 4px;
      font-size: 24px;
      font-weight: 800;
      color:#0f172a;
    }
    .itemsRow span{
      display:inline-flex;
      gap: 8px;
      align-items:center;
      white-space:nowrap;
    }
    .itemsRow .sq{
      width: 16px;
      height: 16px;
      border: 2px solid #0f172a;
      border-radius: 3px;
      display:inline-block;
    }

    .qrCard{
      justify-self:end;
      width: 360px;
      border-radius: 22px;
      border: 3px solid var(--qrBorder);
      background: var(--qrBg);
      padding: 16px 16px 14px;
      text-align:center;
    }
    .qrCard canvas{
      width: 300px;
      height: 300px;
      display:block;
      margin: 0 auto 10px;
      background:#fff;
      border-radius: 14px;
      image-rendering: pixelated;
    }
    .qrCard .qrLbl{
      font-size: 24px;
      font-weight: 950;
      color: #16a34a;
      margin: 0;
    }

    .legalLine{
      height: 92px;
      padding: 18px 74px;
      display:flex;
      align-items:center;
      font-size: 22px;
      color:#64748b;
      border-bottom: 2px solid var(--line);
      line-height: 1.25;
    }

    /* TEAR AREA */
    .tearArea{
      padding: 34px 56px 44px; /* a bit more top padding */
    }

    .tearTop{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      margin-bottom: 26px; /* ✅ more space below title */
      padding-bottom: 6px;
    }
    .tearTop h3{
      margin:0;
      font-size: 34px;
      font-weight: 950;
    }
    .tearTop .hint{
      margin:0;
      font-size: 18px;
      font-weight: 800;
      color:#64748b;
    }

    .grid{
      width: 100%;
      height: calc(var(--H) - 520px - 92px - 34px - 44px - 70px);
      /* header + legal + tearArea padding + tearTop zone (approx) */
      border: 2px solid var(--line);
      border-radius: 14px;
      overflow:hidden;
      display:grid;
      grid-template-columns: repeat(10, 1fr);
      background:#fff;
      position: relative;
    }

    /* Individual tear tabs */
    .tab{
      position: relative;
      padding: 10px 12px 12px;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start;
      gap: 12px;
    }
    .tab:not(:last-child)::after{
      content:"";
      position:absolute;
      top: 0;
      right: 0;
      width: 0;
      height: 100%;
      border-right: 4px dashed var(--dash);
      opacity: 0.95;
    }

    /* Tab header: icon + text */
    .miniMark{
      width: 34px;
      height: 34px;
      display:block;
      color:#16a34a;
      margin-top: 6px;
    }

    .miniTitle{
      font-size: 20px;
      font-weight: 950;
      color:#16a34a;
      line-height: 1.0;
      text-align:center;
      margin-top: 4px;
    }
    .miniSub{
      font-size: 14px;
      font-weight: 800;
      color:#64748b;
      text-align:center;
      line-height: 1.15;
    }

    /* QR on each tab (perfect as you said) */
    .tabQr{
      width: 240px;
      height: 240px;
      display:block;
      background:#fff;
      image-rendering: pixelated;
      margin-top: 4px;
      border-radius: 12px;
    }

    .scanLbl{
      font-size: 20px;
      font-weight: 950;
      margin: 6px 0 0;
      color:#0f172a;
      text-align:center;
    }

    /* ✅ ROTATED ACTION BLOCK (fills blank space + makes it readable) */
    .actionsVertical{
      margin-top: auto;
      width: 100%;
      height: 760px;               /* controls how much of the blank space it uses */
      display:flex;
      align-items:flex-end;        /* anchor near the bottom of the tab */
      justify-content:center;
      padding-bottom: 18px;
    }

    .actions{
      transform: rotate(-90deg);
      transform-origin: center;
      display:flex;
      flex-direction:column;
      gap: 18px;
      align-items:flex-start;
    }

    .act{
      display:flex;
      align-items:center;
      gap: 14px;
      font-size: 30px;             /* ✅ much larger now */
      font-weight: 950;
      color:#0f172a;
      line-height: 1.1;
      white-space: nowrap;
    }

    .box{
      width: 24px;
      height: 24px;
      border: 3px solid #0f172a;
      border-radius: 4px;
      flex: 0 0 auto;
    }

    .act svg{
      width: 22px;
      height: 22px;
      flex: 0 0 auto;
      color:#16a34a;
    }
  </style>
</head>

<body>
  <div id="flyer">
    <!-- Header -->
    <div class="header">
      <div class="brand">
        <div class="logoBox">
          <img src="/mtc_couch_appicon_white_1024_adjusted.png" alt="MOVE THAT COUCH! logo" crossorigin="anonymous">
        </div>
        <div>
          <div class="brandTitle">MOVE THAT COUCH!</div>
          <div class="brandSub">Furniture delivery, made easy.</div>
        </div>
      </div>

      <div class="pitch">
        <div>
          <h2>Need help getting it home?</h2>
          <p>Scan to get help delivering a single item or small load. Nearby drivers can send quotes.</p>

          <div class="itemsRow" aria-label="Examples of items">
            <span><i class="sq"></i> Couches</span>
            <span><i class="sq"></i> Dressers</span>
            <span><i class="sq"></i> Mattresses</span>
            <span><i class="sq"></i> Tables</span>
            <span><i class="sq"></i> Chairs</span>
            <span><i class="sq"></i> Appliances</span>
            <span><i class="sq"></i> TVs</span>
            <span><i class="sq"></i> Art</span>
            <span><i class="sq"></i> Mirrors</span>
            <span><i class="sq"></i> Pianos</span>
            <span><i class="sq"></i> + More</span>
          </div>
        </div>

        <div class="qrCard">
          <canvas id="qrHeader" width="300" height="300"></canvas>
          <p class="qrLbl">Scan to sign up</p>
        </div>
      </div>
    </div>

    <div class="legalLine">
      MOVE THAT COUCH! connects customers and independent drivers. Drivers are not employees, agents, or contractors of MOVE THAT COUCH!.
      The platform does not provide transportation services and is not responsible for loss, damage, or delays.
    </div>

    <!-- Tear area -->
    <div class="tearArea">
      <div class="tearTop">
        <h3>Tear off a tab below to scan later!</h3>
        <p class="hint">✂ Cut along dotted lines</p>
      </div>

      <div class="grid" id="tabsGrid">
        <!-- Tabs inserted by JS -->
      </div>
    </div>
  </div>

  <script>
    window.__flyerReady = (async function(){
      function getQrParam(){
        const params = new URLSearchParams(window.location.search);
        return params.get("qr") || "https://www.movethatcouch.com/";
      }

      // Load QR library
      await new Promise((resolve, reject) => {
        const s = document.createElement("script");
        s.src = "https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js";
        s.async = true;
        s.onload = resolve;
        s.onerror = reject;
        document.head.appendChild(s);
      });

      const link = getQrParam();

      function drawQr(canvas, text){
        const ctx = canvas.getContext("2d");
        const qr = window.qrcode(0, "M");
        qr.addData(text);
        qr.make();

        const size = canvas.width;
        const cells = qr.getModuleCount();
        const tile = size / cells;

        ctx.fillStyle = "#ffffff";
        ctx.fillRect(0, 0, size, size);

        ctx.fillStyle = "#000000";
        for(let r=0; r<cells; r++){
          for(let c=0; c<cells; c++){
            if(qr.isDark(r,c)){
              ctx.fillRect(
                Math.floor(c*tile),
                Math.floor(r*tile),
                Math.ceil(tile),
                Math.ceil(tile)
              );
            }
          }
        }
      }

      // Inline SVG icons (reliable for html2canvas)
      const ICONS = {
        couch: `
          <svg class="miniMark" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M4 11a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v5h-1a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2H4z" fill="none" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            <path d="M6 11V9a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M6 18v2M18 18v2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        `,
        chat: `
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"
              fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        `,
        truck: `
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M10 17h4V6H3v11h2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M14 9h5l2 3v5h-2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="7.5" cy="17.5" r="2.5" fill="none" stroke="currentColor" stroke-width="2"/>
            <circle cx="17.5" cy="17.5" r="2.5" fill="none" stroke="currentColor" stroke-width="2"/>
          </svg>
        `,
        gift: `
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M20 12v10H4V12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M2 7h20v5H2z" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12 22V7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12 7H7.5a2.5 2.5 0 1 1 0-5C10 2 12 7 12 7z" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12 7h4.5a2.5 2.5 0 1 0 0-5C14 2 12 7 12 7z" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        `
      };

      // Build 10 tabs
      const grid = document.getElementById("tabsGrid");
      const TAB_COUNT = 10;

      for(let i=0; i<TAB_COUNT; i++){
        const tab = document.createElement("div");
        tab.className = "tab";

        tab.innerHTML = `
          ${ICONS.couch}
          <div class="miniTitle">MOVE THAT<br/>COUCH!</div>
          <div class="miniSub">Furniture delivery,<br/>made easy.</div>

          <canvas class="tabQr" width="240" height="240"></canvas>
          <div class="scanLbl">Scan to sign up</div>

          <div class="actionsVertical">
            <div class="actions">
              <div class="act">
                <span class="box"></span>
                ${ICONS.chat}
                <span>Get delivery quotes.</span>
              </div>
              <div class="act">
                <span class="box"></span>
                ${ICONS.truck}
                <span>Sign up to drive.</span>
              </div>
              <div class="act">
                <span class="box"></span>
                ${ICONS.gift}
                <span>Refer friends, earn cash.</span>
              </div>
            </div>
          </div>
        `;

        grid.appendChild(tab);
      }

      // Let logo image load for export
      await new Promise(r => setTimeout(r, 250));

      // Draw header QR
      drawQr(document.getElementById("qrHeader"), link);

      // Draw tab QRs
      const canvases = grid.querySelectorAll("canvas.tabQr");
      canvases.forEach(c => drawQr(c, link));

      // settle
      await new Promise(r => setTimeout(r, 150));
    })();
  </script>
</body>
</html>
